$id: /core/plan
$schema: http://json-schema.org/draft-07/schema#
type: object
properties:
  kind:
    type: string
    const: core/plan

  metadata:
    $ref: /core/type-metadata

  spec:
    type: object
    properties:
      blocks:
        type: array
        items:
          type: object
          properties:
            id:
              type: string
            block:
              type: object
              properties:
                ref:
                  type: string
              required:
                - ref
            name:
              type: string
            dimensions:
              type: object
              properties:
                height:
                  type: number
                width:
                  type: number
                top:
                  type: number
                left:
                  type: number
              required:
                - height
                - width
                - top
                - left
          required:
            - id
            - block
            - name
            - dimensions
      connections:
        type: array
        items:
          type: object
          properties:
            from:
              type: object
              properties:
                blockId:
                  type: string
                resourceName:
                  type: string
              required:
                - blockId
                - resourceName
            to:
              type: object
              properties:
                blockId:
                  type: string
                resourceName:
                  type: string
              required:
                - blockId
                - resourceName
            mapping:
              type: object
              additionalProperties: true
          required:
            - from
            - to
